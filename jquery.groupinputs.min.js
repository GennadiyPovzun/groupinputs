/**
 * GroupInputs v. 0.7.3
 * @author Pavel Kornilov <pk@ostrovok.ru> <lusever@lusever.com>
 * https://github.com/lusever/groupinputs
 * MIT Licensed
 */
(function(a){function b(a,b,c){var d;if(b!==undefined)a.setSelectionRange?a.setSelectionRange(b,c):document.selection&&document.selection.createRange&&(d=a.createTextRange(),d.collapse(!0),d.moveEnd("character",c),d.moveStart("character",b),d.select());else{b=0,c=0;if("selectionStart"in a)b=a.selectionStart,c=a.selectionEnd;else if(a.createTextRange){d=document.selection.createRange();var e=d.duplicate();d.parentElement()===a&&(b=-e.moveStart("character",-1e5),c=b+d.text.length)}return{start:b,end:c}}}a.fn.groupinputs=function(){function f(a,e){var f=a[0].value,g=b(a[0]).end,h=f.slice(0,g),i=f.slice(g),j=e.maxlength-i.length,k=!1,l,m,n;for(n=c.length-1;n>e.index;n--)j+=d[n]-c[n].value.length;h.length>j?(h=h.slice(0,j),m=j):m=g;if(f.length>e.maxlength){a[0].value=(h+i).slice(0,e.maxlength),m<=e.maxlength&&(b(a[0],m,m),k=!0),l=(h+i).slice(e.maxlength);if(l.length){m-=Math.min(e.maxlength,h.length);var o,p;while(c[++n]){o=d[n],l+=c[n].value,c[n].value=l.slice(0,o);if(l.length<=o)break;p=c[n].value.length,k||(m<o&&(k=!0,c.eq(n).focus(),b(c[n],m,m)),m-=p),l=l.slice(o)}}k||(c.eq(n).focus(),b(c[n],m,m))}}function g(d){var g=d.type,h=d.data,i=d.data.elem,j=h.index,k;a.browser.opera&&(g==="keypress"&&(g="keydown"),g==="input"&&(g+=".opera"));switch(d.keyCode){case 8:g+=".backspace";break;case 37:g+=".left";break;case 39:g+=".right";break;case 46:g+=".delete"}switch(g){case"keydown.right":k=b(i[0]),k.start===this.value.length&&j!==c.length-1&&(c.eq(j+1).focus(),b(c[j+1],0,0),d.preventDefault());break;case"keydown.backspace":case"keydown.left":k=b(i[0]);if(k.start===k.end&&k.start===0&&j!==0){var l=c.eq(j-1),m=l.val().length;l.focus(),b(l[0],m,m),g==="keydown.left"&&d.preventDefault()}break;case"keyup":case"keydown":k=b(i[0]),k.start===k.end&&k.start===this.value.length&&j!==c.length-1&&this.value.length===h.maxlength&&(c.eq(j+1).focus(),b(c[j+1],0,0));break;case"paste":i.attr("maxlength",e);break;case"propertychange":case"input":i.attr("maxlength")!==h.maxlength&&setTimeout(function(){f(i,h),i.attr("maxlength",h.maxlength)},0);break;case"input.opera":f(i,h)}}if(/iPad|iPhone/.test(navigator.platform))return this;var c=this,d=[],e=0;return c.each(function(a){var b=c.eq(a),f=+b.attr("maxlength");e+=f,d.push(f),b.on("keydown keypress keyup input paste propertychange",{elem:b,index:a,maxlength:f},g)}),a.browser.opera&&c.attr("maxlength",e),this}})(jQuery);