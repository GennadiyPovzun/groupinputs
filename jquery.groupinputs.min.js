/**
 * GroupInputs v. 0.7.1
 * @author Pavel Kornilov <pk@ostrovok.ru> <lusever@lusever.com>
 * https://github.com/lusever/groupinputs
 * MIT Licensed
 */
(function(a){function b(a,b,c){var d;if(b!==undefined)a.focus(),a.setSelectionRange?a.setSelectionRange(b,c):document.selection&&document.selection.createRange&&(d=a.createTextRange(),d.collapse(!0),d.moveEnd("character",c),d.moveStart("character",b),d.select());else{b=0,c=0;if("selectionStart"in a)b=a.selectionStart,c=a.selectionEnd;else if(a.createTextRange){d=document.selection.createRange();var e=d.duplicate();d.parentElement()===a&&(b=-e.moveStart("character",-1e5),c=b+d.text.length)}return{start:b,end:c}}}a.fn.groupinputs=function(){function d(b,c){var d=b[0].value,e=b.caret().end,f=d.slice(0,e),g=d.slice(e),h=c.maxlength-g.length,i=!1,j,k;for(var l=a.length-1;l>c.index;l--)h+=a.eq(l).attr("maxlength")-a[l].value.length;f.length>h?(f=f.slice(0,h),k=h):k=e;if(d.length>c.maxlength){b[0].value=(f+g).slice(0,c.maxlength),k<=c.maxlength&&(b.caret(k,k),i=!0),j=(f+g).slice(c.maxlength);if(j.length){k-=Math.min(c.maxlength,f.length);var m,n;while(a[++l]){m=+a.eq(l).attr("maxlength"),j+=a[l].value,a[l].value=j.slice(0,m);if(j.length<=m)break;n=a[l].value.length,i||(k<m&&(i=!0,a.eq(l).trigger("focus").caret(k,k)),k-=n),j=j.slice(m)}}i||a.eq(l).trigger("focus").caret(k,k)}b.attr("maxlength",c.maxlength)}function e(b){var e=b.type,f=b.data,g=b.data.elem,h=f.index,i=g.caret();switch(b.keyCode){case 8:e+=".backspace";break;case 37:e+=".left";break;case 39:e+=".right";break;case 46:e+=".delete"}switch(e){case"keydown.right":i.start===this.value.length&&h!==a.length-1&&(a.eq(h+1).focus().caret(0,0),b.preventDefault());break;case"keydown.backspace":case"keydown.left":if(i.start===i.end&&i.start===0&&h!==0){var j=a.eq(h-1),k=j.val().length;j.focus().caret(k,k),e==="keydown.left"&&b.preventDefault()}break;case"keyup":case"keydown":case"keypress":i.start===i.end&&i.start===this.value.length&&h!==a.length-1&&this.value.length===f.maxlength&&a.eq(h+1).focus().caret(0,0);break;case"paste":g.attr("maxlength",c);break;case"propertychange":case"input":g.attr("maxlength")!==f.maxlength&&setTimeout(function(){d(g,f)},0)}}if(/iPad|iPhone/.test(navigator.platform))return this;var a=this,b=[],c=0;return a.each(function(b){var d=a.eq(b),f=+d.attr("maxlength");c+=f,d.on("keydown keypress keyup input paste propertychange",{elem:d,index:b,maxlength:f},e)}),this}})(jQuery);